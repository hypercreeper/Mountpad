<html>
<head style="outline: none;">
<title>Mountpad</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300&display=swap" rel="stylesheet">
<style>
button {
font-family: 'Fredoka', sans-serif;
font-weight: 800;
height: 30px;
width: 40px;
background-color: white;
border-style: solid;
border-width: 1px;
border-color: black;
border-radius: 5px;
transition-duration: 0.1s;
}
button:hover {
background-color: lightgray;
}
button.save { 
height: 33px;
width: 145px;
margin-top: 10px;
}
input {
font-family: 'Fredoka', sans-serif;
font-weight: 800;
}
</style>
</head>
<br><br>
<body style="font-family: 'Fredoka', sans-serif;" >
<script>
function b() {
document.execCommand("bold");
document.getElementsByTagName('div')[1].focus();
}
function u() {
document.execCommand("underline");
document.getElementsByTagName('div')[1].focus();
}
function i() {
document.execCommand("italic");
document.getElementsByTagName('div')[1].focus();
}
function s() {
document.execCommand("strikeThrough");
document.getElementsByTagName('div')[1].focus();
}
var fontsize = 3;
function sm() {
fontsize--;
document.execCommand("fontSize", false, fontsize);
document.getElementsByTagName('div')[1].focus();
}
function si() {
var sizee = prompt("Enter a size from 1-7");
document.execCommand("fontSize", false, sizee);
document.getElementsByTagName('div')[1].focus();
}
function sp() {
fontsize++;
document.execCommand("fontSize", false, fontsize);
document.getElementsByTagName('div')[1].focus();
}
function checknow() {
if(fontsize > 7) {
fontsize--;
}
if(fontsize < 1) {
fontsize++;
}
}
setInterval(checknow, 10);
function un() {
document.execCommand("undo");
document.getElementsByTagName('div')[1].focus();
}
function re() {
document.execCommand("redo");
document.getElementsByTagName('div')[1].focus();
}
function jl() {
document.execCommand("justifyLeft");
document.getElementsByTagName('div')[1].focus();
}
function jc() {
document.execCommand("justifyCenter");
document.getElementsByTagName('div')[1].focus();
}
function jf() {
document.execCommand("justifyFull");
document.getElementsByTagName('div')[1].focus();
}
function jr() {
document.execCommand("justifyRight");
document.getElementsByTagName('div')[1].focus();
}
function ii() {
var link = prompt("Enter an image link");
document.execCommand("insertImage", false, link);
document.getElementsByTagName('div')[1].focus();
}
var col = "";
function tc(ev) {
col = ev.target.value;
document.execCommand("foreColor", false, ev.target.value);
document.getElementById("tcbtn").style.backgroundColor = col;
document.getElementsByTagName('div')[1].focus();
}
function bp() {
document.execCommand("insertUnorderedList")
document.getElementsByTagName('div')[1].focus();
}
function nbp() {
document.execCommand("insertOrderedList");
document.getElementsByTagName('div')[1].focus();
}
var hcol = "";
function hc(ev) {
hcol = ev.target.value;
document.execCommand("hiliteColor", false, ev.target.value);
document.getElementById("hcbtn").style.backgroundColor = hcol;
document.getElementsByTagName('div')[1].focus();
}
function fn() {
var link = prompt("Enter a font name: \nfredoka - Fredoka (Default) \nsans-serif - Sans Serif\ncursive - Comic Sans MS\nserif - Serif");
document.execCommand("fontName", false, link);
document.getElementsByTagName('div')[1].focus();
}
function cl(ev) {
document.execCommand("removeFormat");
document.getElementsByTagName('div')[1].focus();
}
function inhtml() {
var page = prompt("Enter an HTML script");
document.execCommand("insertHTML", false, page);
document.getElementsByTagName('div')[1].focus();
}
function invid() {
var page = prompt("Enter a youtube video link");
page = page.replace('https://www.youtube.com/watch?v=','<iframe width="560" height="315" src="https://www.youtube.com/embed/');
page += '" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>';
document.execCommand("insertHTML", false, page);
document.getElementsByTagName('div')[1].focus();
}
function Encoder(html) {
var mdocx;
// We make sure to delete these cuz they are not needed. 
mdocx = html.replace('<html>','');
mdocx = mdocx.replace('</html>','');
mdocx = mdocx.replace('<body>','');
mdocx = mdocx.replace('</body>','');
mdocx = mdocx.replace('</div><div>','/n');


//Now we change the bold and stuff like that
mdocx = mdocx.replace('<b>','[b]');
mdocx = mdocx.replace('</b>','[-b]');
mdocx = mdocx.replace('<u>','[u]');
mdocx = mdocx.replace('</u>','[-u]');
mdocx = mdocx.replace('<i>','[i]');
mdocx = mdocx.replace('</i>','[-i]');
mdocx = mdocx.replace('<strike>','[s]');
mdocx = mdocx.replace('</stike>','[-s]');
// There isnt much we can do for justify left but just in case
mdocx = mdocx.replace('<div style="text-align: left;">','[<j]');
mdocx = mdocx.replace('<div style="text-align: center;">','[{j}]');
mdocx = mdocx.replace('<div style="text-align: justify;">','[|j|]');
mdocx = mdocx.replace('<div style="text-align: right;">','[j>]');
mdocx = mdocx.replace('</div>','[-j]');
var fontsize = '<font size="">';
mdocx = mdocx.replace('<font size="">','[t:' + fontsize.substring(13,14));
mdocx = mdocx.replace('</font>','[-t]');
<!-- mdocx = mdocx.replace('',''); -->
<!-- mdocx = mdocx.replace('',''); -->
<!-- mdocx = mdocx.replace('',''); -->
<!-- mdocx = mdocx.replace('',''); -->
<!-- mdocx = mdocx.replace('',''); -->
<!-- mdocx = mdocx.replace('',''); -->
<!-- mdocx = mdocx.replace('',''); -->
<!-- mdocx = mdocx.replace('',''); -->

return mdocx
}
function Decoder(mdocx) {
var html;

//Now we change the bold and stuff like that
html = mdocx.replace('[b]','<b>');
html = html.replace('[-b]','</b>');
html = html.replace('[u]','<u>');
html = html.replace('[-u]','</u>');
html = html.replace('[i]','<i>');
html = html.replace('[-i]','</i>');
html = html.replace('[s]','<strike>');
html = html.replace('[-s]','</strike>');
html = html.replace('/n','<br>');
// There isnt much we can do for justify left but just in case
html = html.replace('[<j]','<div style="text-align: left;">');
html = html.replace('[{j}]','<div style="text-align: center;">');
html = html.replace('[|j|]','<div style="text-align: justify;">');
html = html.replace('[j>]','<div style="text-align: right;">');
html = html.replace('[-j]','</div>');
<!-- html = html.replace('',''); -->
<!-- html = html.replace('',''); -->
<!-- html = html.replace('',''); -->
<!-- html = html.replace('',''); -->
<!-- html = html.replace('',''); -->
<!-- html = html.replace('',''); -->
<!-- html = html.replace('',''); -->
<!-- html = html.replace('',''); -->
return html
}
function printDiv(idd) { 
            var divContents = document.getElementById(idd).innerHTML; 
            var a = window.open('', '', 'height=' + screen.height + ', width=' + screen.width); 
            a.document.write('<html>'); 
            a.document.write('<body>'); 
            a.document.write(divContents); 
            a.document.write('</body></html>'); 
            a.document.close(); 
            a.print(); 
        } 
function typecheck(fileextension, data) {
if(fileextension == '.html') {
return data
}
if(fileextension == '.mdocx') {
return Encoder(data)
}
if(fileextension != '.mdocx' && fileextension != '.html') {
console.error("File type unknown: " + fileextension);
}
}
function savetext(fileextension) {
let data = document.getElementById("divy").innerHTML;
        const sFileName = document.getElementById("tf").value + fileextension;	   // The file to save the data.
		const textToBLOB = new Blob([typecheck(fileextension, data)], { type: 'text/mdocx' });
        let newLink = document.createElement("a");
        newLink.download = sFileName;

        if (window.webkitURL != null) {
            newLink.href = window.webkitURL.createObjectURL(textToBLOB);
        }
        else {
            newLink.href = window.URL.createObjectURL(textToBLOB);
            newLink.style.display = "none";
            document.body.appendChild(newLink);
        }

        newLink.click(); 
    }
	function openfile(file) {
	const reader = new FileReader();
reader.onload = event => document.getElementById("divy").innerHTML = Decoder(event.target.result); // desired file content
reader.onerror = error => reject(error);
document.getElementById("divy").innerHTML = reader.readAsText(file); // you could also read images and other binaries
document.getElementById("divy").focus();
document.getElementById("tf").value = document.getElementById("ff").files[0].name.replace('.mdocx','');
}
</script>
<div contenteditable="false" style="height:80px; font-size: 30px; position: fixed; top: 1%; background-color: white; padding-top: 10px; padding-left: 10px; padding-right: 10px; padding-bottom: 10px; box-shadow: 0px 10px 20px gray;">
<br>
<div style="margin-top: 15px;">
<button title="Undo" value="<-" onclick="un()"><img src="https://hypercreeper.github.io/Mountpad/undo.png"></button>
<button title="Redo" value="->" onclick="re()"><img src="https://hypercreeper.github.io/Mountpad/redo.png"></button>
│
<button title="Bold" value="B" onclick="b()">
	<img src="https://hypercreeper.github.io/Mountpad/bold.png">
</button>
<button title="Underline" value="U" onclick="u()">
	<img src="https://hypercreeper.github.io/Mountpad/underline.png">
</button>
<button title="Italic" value="I" onclick="i()">
	<img src="https://hypercreeper.github.io/Mountpad/italic.png">
</button>
<button title="Strikethrough" value="S" onclick="s()">
	<img src="https://hypercreeper.github.io/Mountpad/strikethrough.png">
</button>
│
<button title="Justify Left" value="" onclick="jl()">
<img src="https://raw.githubusercontent.com/hypercreeper/Mountpad/main/right.png"></button>
<button title="Justify Center" value="" onclick="jc()">
<img src="https://raw.githubusercontent.com/hypercreeper/Mountpad/main/center.png"></button>
<button title="Justify Full" value="" onclick="jf()">
<img src="https://raw.githubusercontent.com/hypercreeper/Mountpad/main/full.png"></button>
<button title="Justify Right" value="" onclick="jr()">
<img src="https://raw.githubusercontent.com/hypercreeper/Mountpad/main/left.png"></button>
│
<button title="Decrease font Size" value="A-" onclick="sm()">
<img src="https://hypercreeper.github.io/Mountpad/font_down.png"></button>
<button title="font Size" value="A" onclick="si()"><img src="https://hypercreeper.github.io/Mountpad/font_size.png"></button>
<button title="Increase font Size" value="A+" onclick="sp()"><img src="https://hypercreeper.github.io/Mountpad/font_up.png"></button>
<button title="Font name" value="F" onclick="fn()"><img src="https://hypercreeper.github.io/Mountpad/font.png"></button>

<button type="color" title="Choose Text Color" id="tcbtn" onclick="document.getElementById('tc').click();"><img src="https://hypercreeper.github.io/Mountpad/text_color.png"></button>
<input type="color" title="Choose Text Color" value="#000000" id="tc" onchange="tc(event)" hidden>

<button type="color" title="Choose Highlight Color" id="hcbtn" onclick="document.getElementById('hc').click();"><img src="https://hypercreeper.github.io/Mountpad/bg_color.png"></button>
<input type="color" title="Choose Highlight Color" value="#ffffff" id="hc" onchange="hc(event)" hidden>
<button title="Clear Formatting" value="C" onclick="cl(event)" style="background-color: red;"><img src="https://hypercreeper.github.io/Mountpad/clear.png"></button>
│
<button title="Bullet Point" value="* " onclick="bp()"><img src="https://raw.githubusercontent.com/hypercreeper/Mountpad/main/bullets.png"></button>
<button title="Number Bullet Point" value="1." onclick="nbp()"><img src="https://raw.githubusercontent.com/hypercreeper/Mountpad/main/number_bullets.png"></button>
│
<button title="Insert image" value="Im" onclick="ii()"><img src="https://hypercreeper.github.io/Mountpad/insert_pic.png"></button>
<button title="Insert HTML" value="</>" onclick="inhtml()"><img src="https://hypercreeper.github.io/Mountpad/code.png"></button>
<button title="Insert YouTube video" value="YTv" onclick="invid()"><img src="https://hypercreeper.github.io/Mountpad/YT_Logo.png"></button>
│
<button title="Print" value="Print" onclick="printDiv('divy')"><img src="https://raw.githubusercontent.com/hypercreeper/Mountpad/main/print.png"></button>
</div>
<div style="position: absolute; top: 1px; left: 2px;">
<input id="tf" placeholder="enter file name here" onclick="this.select();" class="filename" title="File Name" value="New Document" style="width: 177px; height: 31px; border-style: solid; border-width: 1px; border-color: black; border-radius: 5px;">
&nbsp;
<button value="save" class="save" onclick="savetext('.mdocx')" title="Save File"><img src="https://raw.githubusercontent.com/hypercreeper/Mountpad/main/save.png"> as .mdocx</button>
&nbsp;
<button value="save" class="save" onclick="savetext('.html')" title="Save File"><img src="https://raw.githubusercontent.com/hypercreeper/Mountpad/main/save.png"> as readonly .html</button>
&nbsp;
│
&nbsp;
<input type="file" id="ff" onchange="openfile(document.getElementById('ff').files[0])" accept=".mdocx" hidden>
<button value="open" onclick="document.getElementById('ff').click();" title="Open File">
<img src="https://raw.githubusercontent.com/hypercreeper/Mountpad/main/open.png"></button>
</div>
</div>
<style>
input {
outline: none;
border-style: outset;
}
input:active {
border-style: inset;
}
#divy {
min-height: 80%;
}
</style>
<br>
<div id="divy" contenteditable="true" autofocus style="outline: none; width: 100%; margin-top: 60px; border-color: black; border-width: 2px; border-style: dotted;">

</div>
	<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyBFblcdoUG-GkmWu1a0GjOmkn9V3JjMhQ4",
    authDomain: "notepad-dab3f.firebaseapp.com",
    projectId: "notepad-dab3f",
    storageBucket: "notepad-dab3f.appspot.com",
    messagingSenderId: "106320186250",
    appId: "1:106320186250:web:0d9fdace0db561ac495673",
    measurementId: "G-DXGJRVYEBH"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>
</body>
</html>
